{% extends "/captain/layout.html" %}
{%block css%} 
<link rel="stylesheet" type="text/css" href="/captain/statics/css/core/colors/palette-callout.min.css">
    <style>

	</style>
{%endblock%}
{% block content %}
    <div class="app-content container center-layout mt-2">
      <div class="content-overlay"></div>
      <div class="content-wrapper">
        <div class="content-header row">
          <div class="content-header-left col-md-6 col-12 mb-2">
            <h3 class="content-header-title mb-0">商品設置</h3><!--
            <div class="row breadcrumbs-top">
              <div class="breadcrumb-wrapper col-12">
                <ol class="breadcrumb">
                  <li class="breadcrumb-item"><a href="index.html">Home</a>
                  </li>
                  <li class="breadcrumb-item"><a href="#">Users</a>
                  </li>
                  <li class="breadcrumb-item active">Account setting
                  </li>
                </ol>
              </div>
            </div>
          </div>
          <div class="content-header-right col-md-6 col-12 mb-md-0 mb-2">
            <div class="media width-250 float-right">
              <div class="media-left media-middle">
                <div id="sp-bar-total-sales"></div>
              </div>
              <div class="media-body media-right text-right">
                <h3 class="m-0">$5,668</h3><span class="text-muted">Sales</span>
              </div>
            </div>-->
          </div>
        </div>
        <div class="content-body">
		<!-- account setting page start -->
			<div class="card-content">
				<div class="card">
				<div class="card-body" style="min-height:400px;">                   
					<ul class="nav nav-tabs nav-topline" role="tablist">
						<li class="nav-item">
							<a class="nav-link" id="baseinfo-tab" data-toggle="tab" href="#basic" aria-controls="basic" role="tab" aria-selected="true">基本資料</a>
						</li>
						<li class="nav-item">
							<a class="nav-link active" id="attribute-tab" data-toggle="tab" href="#attribute" aria-controls="attribute" role="tab" aria-selected="false">屬性</a>
						</li>
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" aria-haspopup="true">
							分類
							</a>
							<div class="dropdown-menu">
								<a class="dropdown-item" id="category-tab" href="#category" data-toggle="tab" aria-controls="category" role="tab" aria-selected="true">主分類</a>
								<a class="dropdown-item" id="subcategory-tab" href="#subcategory" data-toggle="tab" aria-controls="subcategory" role="tab" aria-selected="true">雜項分類</a>
							</div>
						</li>
						<li class="nav-item">
							<a class="nav-link" id="price-tab" data-toggle="tab" href="#price" aria-controls="price" role="tab" aria-selected="false">價格</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" id="image-tab" data-toggle="tab" href="#image" aria-controls="image" role="tab" aria-selected="false">圖片</a>
						</li>						
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" aria-haspopup="true">
							文章
							</a>
							<div class="dropdown-menu">
								<a class="dropdown-item" id="htmlcontent-tab" href="#htmlcontent" data-toggle="tab" aria-controls="htmlcontent" role="tab" aria-selected="true">內容描述</a>
								<a class="dropdown-item" id="htmlspec-tab" href="#htmlspec" data-toggle="tab" aria-controls="htmlspec" role="tab" aria-selected="true">規格描述</a>
								<a class="dropdown-item" id="htmlinfo-tab" href="#htmlinfo" data-toggle="tab" aria-controls="htmlinfo" role="tab" aria-selected="true">其它資訊</a>
								<a class="dropdown-item" id="htmlreturn-tab" href="#htmlreturn" data-toggle="tab" aria-controls="htmlreturn" role="tab" aria-selected="true">送貨退貨說明</a>
							</div>
						</li>
						<li class="nav-item">
							<a class="nav-link" id="active-tab" data-toggle="tab" href="#active" aria-controls="active" role="tab" aria-selected="false">上架</a>
						</li>
					</ul>
					<div class="tab-content px-1 pt-1 border-grey border-lighten-2 border-0-top">
						<div class="tab-pane" id="basic" aria-labelledby="basic" role="tabpanel">
							<form class="form">
							<div class="form-body">
								<h4 class="form-section"><i class="fa fa-eye"></i>主型號及名稱</h4>
								<div class="row">
									<div class="col-md-6">
										<div class="form-group">
											<label for="sku">主型號必須唯一, 不能含空格(SKU)</label>
											<input type="text" id="sku" class="form-control border-primary" placeholder="sku" name="sku">
										</div>
									</div>
									<div class="col-md-6">
										<div class="form-group">
											<label for="name">商品名唯一</label>
											<input type="text" id="name" class="form-control border-primary" placeholder="Name" name="name">
										</div>
									</div>
								</div>

								<h4 class="form-section"><i class="feather icon-mail"></i> 商品副標題</h4>

								<div class="form-group">
									<label for="description">商品副標題會顯示在搜尋頁說明欄, 字數勿超過100字</label>
									<textarea id="description" rows="5" class="form-control border-primary" name="description" placeholder="商品副標題"></textarea>
								</div>

							</div>

							<div class="form-actions right">
								<button type="reset" class="btn btn-warning mr-1">
									<i class="feather icon-x"></i> Cancel
								</button>
								<button type="submit" class="btn btn-primary">
									<i class="fa fa-check-square-o"></i> Save
								</button>
							</div>
						</form>
						</div>
						<div class="tab-pane active in" id="attribute" aria-labelledby="attribute-tab" role="tabpanel">
                        <form class="form">
							<div class="form-body">
							<h4 class="form-section"><i class="fa fa-eye"></i>屬性設定項 <a href="#"><i class="fa fa-plus-circle"></i></a></h4>
                            <div class="container">

                            <div class="row col-12">
                            <div class="collapse w-100" id="collapseExample">

				<div class="card-content collapse show">
					<div class="card-body">

                        <fieldset>
                            <div class="input-group">
								<input type="text" id="attribute_name" class="form-control" placeholder="屬性名稱" name="attribute_name">
                                <input type="hidden" id="attribute_index" name="attribute_index">
								<div class="input-group-append">
								<button type="button" class="btn btn-success" onclick="javascript:submit_attribute();">
									<i class="fa fa-check"></i> Save
								</button>
								<button type="reset" class="btn btn-danger" onclick="javascript:cancel_attribute();">
									<i class="fa fa-times"></i> Cancel
								</button>
								</div>
							</div>
                        </fieldset>

					</div>
				</div>

                            </div>
                <table class="table table-striped">
                      <thead>
                        <tr>
                          <th scope="col">#</th>
                          <th scope="col">屬性</th>
                          <th scope="col">屬性值</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <th scope="row">1</th>
                          <td><span class="cursor-pointer text-danger" onclick="javascript:toggleopen(this.getAttribute('index'),this.innerHTML);" index=0 >尺寸</span>
                          </td>
                          <td>
                            <div class="row p-1">
                                <div class="w-10 mr-1 border-danger" style="height:100%;padding:3px;">
                                    <img class="align-middle cursor-pointer" id="currentPhoto" style="width:60px;" 
                                    src="SomeImage.jpg" onerror="this.onerror=null; this.src='/captain/statics/images/carousel/10.jpg'" 
                                    alt="" onclick="alert('OK');">
                                    <span class="cursor-pointer">XL</span>
                                </div>
                                <div class="w-10 mr-1 border-danger" style="height:100%;padding:3px;">
                                    <img class="align-middle cursor-pointer" id="currentPhoto" style="width:60px;" 
                                    src="SomeImage.jpg" onerror="this.onerror=null; this.src='/captain/statics/images/carousel/10.jpg'" 
                                    alt="" onclick="alert('OK');">
                                    <span>L</span>
                                </div>
                                <div class="w-10 mr-1 border-danger" style="height:100%;padding:3px;">
                                    <img class="align-middle cursor-pointer" id="currentPhoto" style="width:60px;" 
                                    src="SomeImage.jpg" onerror="this.onerror=null; this.src='/captain/statics/images/carousel/10.jpg'" 
                                    alt="" onclick="alert('OK');">
                                    <span>M</span>
                                </div>
                                <div class="w-10 mr-1 border-danger" style="height:100%;padding:3px;">
                                    <img class="align-middle cursor-pointer" id="currentPhoto" style="width:60px;" 
                                    src="SomeImage.jpg" onerror="this.onerror=null; this.src='/captain/statics/images/carousel/10.jpg'" 
                                    alt="" onclick="alert('OK');">
                                    <span>S</span>
                                </div>
                                <div class="w-10 mr-1 border-danger" style="height:100%;padding:3px;">
                                    <img class="align-middle cursor-pointer" id="currentPhoto" style="width:60px;" 
                                    src="SomeImage.jpg" onerror="this.onerror=null; this.src='/captain/statics/images/carousel/10.jpg'" 
                                    alt="" onclick="alert('OK');">
                                    <span>XS</span>
                                </div>
                                <div class="w-10 mr-1 border-danger" style="height:100%;padding:3px;">
                                    <img class="align-middle cursor-pointer" id="currentPhoto" style="width:60px;" 
                                    src="SomeImage.jpg" onerror="this.onerror=null; this.src='/captain/statics/images/carousel/10.jpg'" 
                                    alt="" onclick="alert('OK');">
                                    <span>XXS</span>
                                </div>

                            </div>
                    </td>
                        </tr>
                        <tr>
                          <th scope="row">2</th>
                          <td><a href="#" onclick="javascript:toggleopen(this.getAttribute('index'),this.innerHTML);" index=1>顏色</a></td>
                          <td>Thornton</td>
                        </tr>
                        <tr>
                          <th scope="row">3</th>
                          <td>Larry</td>
                          <td>the Bird</td>
                        </tr>
                      </tbody>
                    </table>
               
                            </div>
                            </div>
                           </div>
                        </form>
						</div>
						<div class="tab-pane" id="category" aria-labelledby="category-tab" role="tabpanel">
							<p>category tab</p>
						</div>
						<div class="tab-pane" id="subcategory" aria-labelledby="subcategory-tab" role="tabpanel">
							<p>subcategory tab</p>
						</div>
						<div class="tab-pane" id="price" aria-labelledby="price-tab" role="tabpanel">
							<p>price tab</p>
						</div>
						<div class="tab-pane" id="image" aria-labelledby="image-tab" role="tabpanel">
							<p>image tab</p>
						</div>
						<div class="tab-pane" id="htmlcontent" aria-labelledby="htmlcontent-tab" role="tabpanel">
							<p>htmlcontent tab</p>
						</div>
						<div class="tab-pane" id="htmlspec" aria-labelledby="htmlspec-tab" role="tabpanel">
							<p>htmlspec tab</p>
						</div>
						<div class="tab-pane" id="htmlinfo" aria-labelledby="htmlinfo-tab" role="tabpanel">
							<p>htmlinfo tab</p>
						</div>
						<div class="tab-pane" id="htmlreturn" aria-labelledby="htmlreturn-tab" role="tabpanel">
							<p>htmlreturn tab</p>
						</div>
						<div class="tab-pane" id="active" aria-labelledby="active-tab" role="tabpanel">
							<p>active tab</p>
						</div>                        
                        
                    </div>
				</div>
				</div>
			</div>
				
		</div>


		<!-- account setting page end -->
        </div>

    </div>

{% endblock %}    
{%block js%} 

<script>

var csrf_token = "{{csrf_token()}}";


$(window).on("load", function(){
  // Handler when all assets (including images) are loaded
    //e = $('.collapse') //document.getElementById('collapseExample');
    //$('#collapseExample').collapse('show').collapse('hide')


});


const delay = (dl) => new Promise(r => {
    setTimeout(r, dl)
})

function callback(_index,_name) {
    let name = document.getElementById('attribute_name')
    let index = document.getElementById('attribute_index')
    name.value=_name
    index.value=_index
}

function toggleopen(index,name) {
    let e = document.getElementById('collapseExample')
    if (document.getElementById('attribute_index').value == index) 
        return null //不要重開自己
    
    if (e.classList.contains('show')) 
        {hide_open(callback(index,name))}
    else
        {hide_open(callback(index,name));
        $('#collapseExample').collapse('show')}
}

const hide_open = (async function(cb) {
    $('#collapseExample').collapse('hide')
    await delay(500)
    
    $('#collapseExample').collapse('show')
    await delay(500)
    cb
})

function cancel_attribute() {
    $('#collapseExample').collapse('hide')
}  
function submit_attribute() {
    let name = document.getElementById('attribute_name')
    let index = document.getElementById('attribute_index')
    alert(name.value+':'+index.value)
} 
</script>
{%endblock%}